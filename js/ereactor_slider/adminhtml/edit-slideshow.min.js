var EREACTOR={UTILS:{},SLIDER:{}};
(function(a){a(function(){var b=a("#ereactor-slider-preview .nivoSlider");a("#slideshow_general_stretch_width").click(function(){a("#slideshow_general_width").val(100);a("#slideshow_general_width_unit option").prop("selected",!1).filter('[value="1"]').prop("selected",!0)});a("#slideshow_general_autoplay_interval").change(function(){b.data("nivoslider").options({pauseTime:parseInt(this.value,10)})});a("#slideshow_general_transition_type").change(function(){b.data("nivoslider").options({effect:this.value})});a("#slideshow_general_transition_time").change(function(){b.data("nivoslider").options({animSpeed:parseInt(this.value,
10)})});a("#page_tabs_general_content").find('input[name="pause_on_hover"]').change(function(){a(this).is(":checked")&&b.data("nivoslider").setPauseOnHover("1"===this.value)}).end().find('input[name="show_arrows"]').change(function(){a(this).is(":checked")&&a(".nivo-directionNav",b).toggle("1"===this.value)}).end().find('input[name="show_buttons"]').change(function(){a(this).is(":checked")&&a(".nivo-controlNav",b.parent()).toggle("1"===this.value)}).end().find('input[name="show_buttons_overlay"]').change(function(){a(this).is(":checked")&&
a(".nivo-controlNav",b.parent()).toggleClass("nivo-controlNav-hover","1"===this.value)}).end().find('input[name="manual_advance"]').change(function(){a(this).is(":checked")&&b.data("nivoslider").options({manualAdvance:"1"===this.value})}).end();varienGlobalEvents.attachEventHandler("showTab",function(b){a("#ereactor-slider-preview").toggle("general"===b.tab.name)})});a(function(){function b(a){EREACTOR.UTILS.ajaxSubmit(a,EREACTOR.SLIDER.url.quickAddSave,function(){slideGridJsObject.reload()})}function d(c){c=
c.filter(".entry-edit");0===a('[name="slide[slide_id]"]',c).length&&a("button.save",c).click(function(){b(c);return!1});c.find('[name="slide[type]"]').change(function(){var a=".field-t"+this.value;c.find('[class*="field-t"]').not(a).closest("tr").hide().end().end().filter(a).closest("tr").show().end().end().end().find(".ereactor-slide-type").removeClass("ereactor-selected").filter(".ereactor-slide-t"+this.value).addClass("ereactor-selected")}).change().end().find(".ereactor-slide-type").click(function(){a('[name="slide[type]"]',
c).val(a(this).data("value")).change();return!1}).end().find(".ereactor-image-chooser").click(function(){EREACTOR.UTILS.openMediaBrowser(a(this).prev()[0],EREACTOR.SLIDER.url.imageChooser,EREACTOR.SLIDER.url.imageInsert);return!1}).end().find('[class*="field-t"]').change(function(){var b=a('[name="slide[type]"]',c).val();"image"===b&&""===a('[name="slide[image_url]"]',c).val()||"html"===b&&""===a('[name="slide[html_html]"]',c).val()||EREACTOR.UTILS.ajaxSubmit(c,EREACTOR.SLIDER.url.slidePreview,function(a){c.prevAll().remove().end().before(a.responseText)})}).end()}
0!==a("#page_tabs_slides_content").length&&(d(a("#page_tabs_slides_content .entry-edit")),slideGridJsObject.rowClickCallback=function(c,e){a(e.target).is("td")&&EREACTOR.UTILS.openModal(e.currentTarget.title,d,b);return!1},a("#slideGrid").on("click",".ereactor-ajax-link",function(){var b=a(this);if(b.is(".ereactor-confirm")&&!window.confirm(b.data("confirm")))return!1;new Ajax.Request(this.href,{method:"get",onSuccess:function(){slideGridJsObject.reload()}});return!1}).on("click",".ereactor-ajax-modal",
function(){return EREACTOR.UTILS.openModal(this.href,d,b)}))});a(function(){function b(a){EREACTOR.UTILS.ajaxSubmit(a,EREACTOR.SLIDER.url.batchAdd,function(){slideGridJsObject.reload()})}0!==a("#page_tabs_slides_content").length&&a("#generateSlides").find(".ereactor-batch-images").click(function(){return EREACTOR.UTILS.openModal(this.href,null,b)}).end()});a(function(){EREACTOR.UTILS.openMediaBrowser=function(a,d,c){var e;MediabrowserUtility.openDialog(d+"?target_element_id="+a.id);e=setInterval(function(){MediabrowserInstance&&
(MediabrowserInstance.onInsertUrl=c,clearInterval(e))},100)};Windows.addObserver({onDestroy:function(b,d){if(d.element.id===MediabrowserUtility.dialogWindow.element.id&&MediabrowserInstance){var c=a("#"+MediabrowserInstance.targetElementId);setTimeout(function(){c.change()},100);MediabrowserInstance=null}}})});a(function(){EREACTOR.UTILS.ajaxSubmit=function(b,d,c){var e={};a(":input",b).each(function(){e[this.name]=this.value});new Ajax.Request(d,{method:"post",parameters:e,onSuccess:function(a){c&&
c(a)}})}});a(function(){var b=a('<div class="ereactor_modal_container"><div class="ereactor_modal_wrapper"></div></div>').hide().appendTo("body");EREACTOR.UTILS.openModal=function(d,c,e){new Ajax.Request(d,{method:"get",onSuccess:function(d){var f=b.height(a("html").height()).show().find(".ereactor_modal_wrapper").html(d.responseText).children();c&&c(f);a(".save, .cancel",f).click(function(){a(this).is(".save")&&e&&e(f);b.hide();return!1})}});return!1}})})(jQuery);